---
ì‚¬ìš©ì ê´€ë¦¬ ì„¤ê³„ ë¬¸ì„œ
---

# ì‚¬ìš©ì ê´€ë¦¬

## 1. ê°œìš”

ë³¸ ë¬¸ì„œëŠ” ì‚¬ìš©ìì˜ í™œë™ì„ ê¸°ë¡í•˜ê³  ê´€ë¦¬í•˜ê¸° ìœ„í•œ ê¸°ëŠ¥(Audit)ì„¤ê³„ ë¬¸ì„œë¡œ ìœ ìŠ¤ì¼€ì´ìŠ¤, ì¸í„°í˜ì´ìŠ¤, ì‹œí€€ìŠ¤, í´ë˜ìŠ¤, ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„ì„œë¥¼ í¬í•¨í•œë‹¤.

## 2. ìš”êµ¬ì‚¬í•­

- ì¼ë°˜ ìš”êµ¬ì‚¬í•­  
  - ì•„ì´ë””ëŠ” ì´ë©”ì¼ í˜•íƒœ  
  - ë‹¤ì¤‘ ì„¸ì…˜ì„ í—ˆìš©  
    - ë‹¤ì¤‘ ì„¸ì…˜ì˜ ë²”ìœ„ëŠ” ë³´ì•ˆ ìš”êµ¬ì‚¬í•­(ì ‘ì† ì•Œë¦¼, ë‹¤ì¤‘êµ­ê°€ ë¶ˆê°€)ì„ ë§Œì¡±í•˜ë©´ì„œ  
  - ì‚¬ìš©ìëŠ” ì—¬ëŸ¬ê°œì˜ ê·¸ë£¹ì— ì†Œì†ë  ìˆ˜ ìˆìŒ  
  - ê·¸ë£¹ì€ íŠ¸ë¦¬ í˜•íƒœë¡œ êµ¬ì„±
- ì‚¬ìš©ì ë³´ì•ˆ ìš”êµ¬ì‚¬í•­  
  - ID/íŒ¨ìŠ¤ì›Œë“œ ê¸°ë°˜ ë¡œê·¸ì¸  
    - ì‚¬ìš©ì IDëŠ” ê³ ìœ í•´ì•¼ í•˜ë©°, ì¤‘ë³µ ë“±ë¡ì„ ë°©ì§€í•´ì•¼ í•œë‹¤.  
    - íŒ¨ìŠ¤ì›Œë“œëŠ” ì•ˆì „í•œ í•´ì‹œ ì•Œê³ ë¦¬ì¦˜(Bcrypt, Argon2 ë“±)ìœ¼ë¡œ ì €ì¥í•´ì•¼ í•œë‹¤.  
    - íŒ¨ìŠ¤ì›Œë“œì˜ ìµœì†Œ ê¸¸ì´ëŠ” 8ì ì´ìƒìœ¼ë¡œ í•˜ê³ , ëŒ€ë¬¸ì, ì†Œë¬¸ì, ìˆ«ì, íŠ¹ìˆ˜ë¬¸ìë¥¼ í¬í•¨í•˜ë„ë¡ í•œë‹¤.  
    - ë¡œê·¸ì¸ ì‹¤íŒ¨ ì‹œ ì¼ì • íšŸìˆ˜(ì˜ˆ: 5íšŒ) ì´ˆê³¼í•˜ë©´ ê³„ì •ì„ ì ê·¸ê³ , ì¼ì • ì‹œê°„ í›„ ë‹¤ì‹œ ì‹œë„í•  ìˆ˜ ìˆë„ë¡ í•œë‹¤.  
  - ë¹„ë°€ë²ˆí˜¸ ì •ì±…  
    - ì‚¬ìš©ìëŠ” ì¼ì • ê¸°ê°„(ì˜ˆ: 90ì¼)ë§ˆë‹¤ ë¹„ë°€ë²ˆí˜¸ë¥¼ ë³€ê²½í•´ì•¼ í•œë‹¤.  
    - ìµœê·¼ ì‚¬ìš©í•œ ë¹„ë°€ë²ˆí˜¸(ì˜ˆ: 5ê°œ)ëŠ” ì¬ì‚¬ìš©í•  ìˆ˜ ì—†ë„ë¡ í•œë‹¤.  
    - íŒ¨ìŠ¤ì›Œë“œëŠ” ìµœì†Œí•œ ë‹¤ìŒ ê¸°ì¤€ì„ ì¶©ì¡±í•´ì•¼ í•œë‹¤.  
    - ëŒ€ì†Œë¬¸ì, ìˆ«ì, íŠ¹ìˆ˜ë¬¸ì í¬í•¨  
    - ê³µë°± í¬í•¨ ë¶ˆê°€  
    - ì¼ë°˜ì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” ì‰¬ìš´ ë¹„ë°€ë²ˆí˜¸(ì˜ˆ: 12345678, password1 ë“±) ì°¨ë‹¨  
  - ìë™ ë¡œê·¸ì•„ì›ƒ  
    - ì‚¬ìš©ìê°€ ì¼ì • ì‹œê°„(ì˜ˆ: 10ë¶„) ë™ì•ˆ í™œë™ì´ ì—†ì„ ê²½ìš° ìë™ìœ¼ë¡œ ë¡œê·¸ì•„ì›ƒ ì²˜ë¦¬í•œë‹¤.  
    - ë¯¼ê°í•œ ì‘ì—…(ì˜ˆ: ë¹„ë°€ë²ˆí˜¸ ë³€ê²½, ê²°ì œ ì •ë³´ ë³€ê²½ ë“±) ìˆ˜í–‰ ì‹œ ì¬ì¸ì¦(íŒ¨ìŠ¤ì›Œë“œ)ì„ ìš”êµ¬í•œë‹¤.  
  - ì„¸ì…˜ ë° í† í° ê´€ë¦¬  
    - JWT ì‚¬ìš© ì‹œ, í† í°ì€ ì•”í˜¸í™” ë° ì„œëª…í•˜ì—¬ ì €ì¥í•´ì•¼ í•œë‹¤.  
    - ì„¸ì…˜ ì¿ í‚¤ëŠ” HttpOnly, Secure, SameSite=Strict ì˜µì…˜ì„ ì ìš©í•´ì•¼ í•œë‹¤. ?? 
    - ì‚¬ìš©ìê°€ ë¡œê·¸ì•„ì›ƒí•˜ë©´ í•´ë‹¹ ì„¸ì…˜ê³¼ ì¸ì¦ í† í°ì„ ì¦‰ì‹œ ë¬´íš¨í™”í•´ì•¼ í•œë‹¤.
- ê³„ì • ë³´ì•ˆ ìš”êµ¬ì‚¬í•­
  - ê³„ì • ì ê¸ˆ ë° ë³µêµ¬
    - ì—¬ëŸ¬ ë²ˆ ë¡œê·¸ì¸ ì‹¤íŒ¨(ì˜ˆ: 5íšŒ) ì‹œ ê³„ì •ì„ ì ê·¸ê³ , ì´ë©”ì¼ ë˜ëŠ” ê´€ë¦¬ì ìŠ¹ì¸ í›„ í•´ì œí•´ì•¼ í•œë‹¤.  
    - ê³„ì • ë³µêµ¬ ì‹œ ì´ë©”ì¼ ì¸ì¦, ë³´ì•ˆ ì§ˆë¬¸ ë˜ëŠ” 2FAë¥¼ ìš”êµ¬í•´ì•¼ í•œë‹¤.  
  - ë¡œê·¸ ë° ê°ì‚¬(Audit Logging)
    - ì‚¬ìš©ì ë¡œê·¸ì¸, ë¡œê·¸ì•„ì›ƒ, ë¹„ë°€ë²ˆí˜¸ ë³€ê²½, ê³„ì • ìƒì„±/ì‚­ì œ ë“±ì˜ ì´ë²¤íŠ¸ë¥¼ ê¸°ë¡í•´ì•¼ í•œë‹¤.
    - ë¡œê·¸ëŠ” ìµœì†Œ 6ê°œì›” ì´ìƒ ì €ì¥í•˜ê³ , ë³€ê²½í•  ìˆ˜ ì—†ë„ë¡ ë³´í˜¸í•´ì•¼ í•œë‹¤.
  - ì˜ì‹¬ìŠ¤ëŸ¬ìš´ í™œë™ íƒì§€
    - ë™ì¼í•œ ê³„ì •ìœ¼ë¡œ ì—¬ëŸ¬ ìœ„ì¹˜ì—ì„œ ë¡œê·¸ì¸ ì‹œ ì•Œë¦¼ì„ ì œê³µí•´ì•¼ í•œë‹¤.
    - ë¹„ì •ìƒì ì¸ ë¡œê·¸ì¸ ì‹œë„(ì˜ˆ: ì—¬ëŸ¬ êµ­ê°€ì—ì„œ ë¡œê·¸ì¸ ì‹œë„)ë¥¼ ê°ì§€í•˜ê³  ì°¨ë‹¨í•  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤.
- ê¶Œí•œ ê´€ë¦¬ ë³´ì•ˆ ìš”êµ¬ì‚¬í•­  
  - ì—­í•  ê¸°ë°˜ ì ‘ê·¼ ì œì–´(RBAC)
    - ì‚¬ìš©ì ê·¸ë£¹(ì˜ˆ: ê´€ë¦¬ì, ì¼ë°˜ ì‚¬ìš©ì, ê²ŒìŠ¤íŠ¸ ë“±)ì— ë”°ë¼ ì ‘ê·¼ ê¶Œí•œì„ ì„¤ì •í•´ì•¼ í•œë‹¤.
    - ìµœì†Œ ê¶Œí•œ ì›ì¹™(Principle of Least Privilege, POLP)ì„ ì ìš©í•´ì•¼ í•œë‹¤.
    - ê´€ë¦¬ìëŠ” ì‹œìŠ¤í…œ ë‚´ì—ì„œ íŠ¹ì • ì—­í• ì„ ê°€ì§„ ì‚¬ìš©ìë§Œ ìƒì„±í•  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤.
  - ê¶Œí•œ ìƒìŠ¹ ë°©ì§€
    - ì‚¬ìš©ìê°€ ì„ì˜ë¡œ ìì‹ ì˜ ê¶Œí•œì„ ë³€ê²½í•  ìˆ˜ ì—†ë„ë¡ í•´ì•¼ í•œë‹¤.
    - ê´€ë¦¬ì ê³„ì •ì˜ ìƒì„± ë° ìˆ˜ì •ì€ ë¡œê·¸ë¡œ ê¸°ë¡í•˜ê³ , ê°ì‚¬ê°€ ê°€ëŠ¥í•´ì•¼ í•œë‹¤.
  - API ì ‘ê·¼ ê¶Œí•œ ì„¤ì •
    - API í˜¸ì¶œ ì‹œ ì‚¬ìš©ì ì¸ì¦ ë° ê¶Œí•œ ê²€ì‚¬ë¥¼ ìˆ˜í–‰í•´ì•¼ í•œë‹¤.
    - ê´€ë¦¬ ê¸°ëŠ¥ì„ ìˆ˜í–‰í•˜ëŠ” APIëŠ” ì¶”ê°€ì ì¸ ì¸ì¦(ì˜ˆ: API í‚¤, OAuth 2.0 ë“±)ì„ ìš”êµ¬í•´ì•¼ í•œë‹¤.
- ê¸°íƒ€ ë³´ì•ˆ ìš”êµ¬ì‚¬í•­
  - ë°ì´í„° ë³´í˜¸ ë° ì•”í˜¸í™”
    - ë¹„ë°€ë²ˆí˜¸ëŠ” í‰ë¬¸ ì €ì¥ì„ ê¸ˆì§€í•˜ê³ , ì•ˆì „í•œ í•´ì‹œ í•¨ìˆ˜(Bcrypt, PBKDF2, Argon2 ë“±)ë¥¼ ì‚¬ìš©í•´ì•¼ í•œë‹¤.
    - ì‚¬ìš©ìì˜ ì¤‘ìš”í•œ ì •ë³´(ì˜ˆ: ì´ë©”ì¼, ì „í™”ë²ˆí˜¸ ë“±)ëŠ” ì €ì¥ ì‹œ ì•”í˜¸í™”í•´ì•¼ í•œë‹¤.
  - ì™¸ë¶€ ê³µê²© ë°©ì–´
    - ë¸Œë£¨íŠ¸í¬ìŠ¤ ê³µê²©ì„ ë°©ì§€í•˜ê¸° ìœ„í•´ CAPTCHA ë˜ëŠ” ì§€ì—° ì‘ë‹µ(ì˜ˆ: 1ì´ˆ ë”œë ˆì´)ì„ ì ìš©í•œë‹¤.
    - CSRF(Cross-Site Request Forgery) ë³´í˜¸ë¥¼ ìœ„í•´ CSRF í† í°ì„ ì‚¬ìš©í•œë‹¤.
    - XSS(Cross-Site Scripting) ë°©ì§€ë¥¼ ìœ„í•´ ì…ë ¥ ê°’ì„ í•„í„°ë§ ë° ì¸ì½”ë”©í•œë‹¤.
  - íƒˆí‡´ ë° ë°ì´í„° ì‚­ì œ ì •ì±…
    - ì‚¬ìš©ìê°€ ê³„ì •ì„ íƒˆí‡´í•˜ë©´ ëª¨ë“  ê´€ë ¨ ë°ì´í„°ë¥¼ ì•ˆì „í•˜ê²Œ ì‚­ì œí•´ì•¼ í•œë‹¤.
    - ì¼ë¶€ ë°ì´í„°(ë²•ì  ìš”êµ¬ì‚¬í•­ì— ë”°ë¼ ë³´ì¡´í•´ì•¼ í•˜ëŠ” ê¸°ë¡)ëŠ” ë³„ë„ë¡œ ê´€ë¦¬í•´ì•¼ í•œë‹¤.

### 2.1. Rate Limiting

ì‚¬ìš©ì ê´€ë ¨ APIì—ì„œ Rate Limit(ì†ë„ ì œí•œ) ì„ ì ìš©í•´ì•¼ í•˜ëŠ” ì£¼ìš” ë¶€ë¶„

(1) ë¡œê·¸ì¸ API (Authentication)  
ì˜ˆ: POST /api/auth/login  
ì´ìœ :  
ë¸Œë£¨íŠ¸í¬ìŠ¤ ê³µê²©(ë¬´ì°¨ë³„ ëŒ€ì… ê³µê²©) ë°©ì§€  
ìë™í™”ëœ ë¡œê·¸ì¸ ì‹œë„(ë´‡ ê³µê²©) ë°©ì§€  
ì¶”ì²œ ì œí•œ:  
ë™ì¼ IPì—ì„œ 510íšŒ ì‹¤íŒ¨ ì‹œ 515ë¶„ ë™ì•ˆ ë¡œê·¸ì¸ ì°¨ë‹¨  
CAPTCHA ì ìš© í›„ ì¼ì • íšŸìˆ˜(ì˜ˆ: 10íšŒ) ì´ˆê³¼ ì‹œ ì¶”ê°€ ì°¨ë‹¨  

(2) íšŒì›ê°€ì… API (Sign-Up)  
ì˜ˆ: POST /api/auth/register  
ì´ìœ :  
ìë™í™”ëœ ê³„ì • ìƒì„±(ìŠ¤íŒ¸ ê°€ì…) ë°©ì§€  
ì¶”ì²œ ì œí•œ:  
ë™ì¼ IPì—ì„œ 10~20íšŒ/ì‹œê°„ ì´ìƒ ìš”ì²­ ì‹œ ì°¨ë‹¨  
CAPTCHA ë˜ëŠ” ì´ë©”ì¼ ì¸ì¦ì„ í•„ìˆ˜ë¡œ ìš”êµ¬  

(3) ë¹„ë°€ë²ˆí˜¸ ì°¾ê¸°/ì¬ì„¤ì • API  
ì˜ˆ: POST /api/auth/reset-password ë˜ëŠ” POST /api/auth/forgot-password  
ì´ìœ :  
ë¬´ì°¨ë³„ ëŒ€ì… ê³µê²©ì„ í†µí•œ ê³„ì • íƒˆì·¨ ë°©ì§€  
ê³¼ë„í•œ ìš”ì²­ìœ¼ë¡œ ì´ë©”ì¼/SMS API ë¹„ìš© ì¦ê°€ ë°©ì§€  
ì¶”ì²œ ì œí•œ:  
ë™ì¼ IPì—ì„œ 5~10íšŒ/ì‹œê°„ ì´ìƒ ìš”ì²­ ì‹œ ì°¨ë‹¨  
ë™ì¼ ì‚¬ìš©ì(ì´ë©”ì¼, ì „í™”ë²ˆí˜¸) ê¸°ì¤€ 3~5íšŒ/ì‹œê°„ ìš”ì²­ ì œí•œ  

(4) API í† í° ìƒì„± API  
ì˜ˆ: POST /api/auth/generate-token  
ì´ìœ :  
API í‚¤ ë° í† í° ìƒì„± ë‚¨ìš© ë°©ì§€  
ì¶”ì²œ ì œí•œ:  
ë™ì¼ ì‚¬ìš©ìë‹¹ 3~5íšŒ/ì‹œê°„ ì´ìƒ ìš”ì²­ ì‹œ ì œí•œ  

(5) ì‚¬ìš©ì í”„ë¡œí•„ ì—…ë°ì´íŠ¸ API  
ì˜ˆ: PUT /api/user/profile  
ì´ìœ :  
ê³¼ë„í•œ ìš”ì²­ìœ¼ë¡œ ì¸í•´ ì„œë²„ ë¶€í•˜ ì¦ê°€ ë°©ì§€  
ì¶”ì²œ ì œí•œ:  
ë™ì¼ ê³„ì •ì—ì„œ 5~10íšŒ/ì‹œê°„ ì´ìƒ ìš”ì²­ ì‹œ ì œí•œ  

(6) ê²Œì‹œê¸€ ì‘ì„±/ëŒ“ê¸€ API (ìŠ¤íŒ¸ ë°©ì§€)  
ì˜ˆ: POST /api/posts ë˜ëŠ” POST /api/comments  
ì´ìœ :  
ìë™í™”ëœ ìŠ¤íŒ¸ ëŒ“ê¸€, ë„ë°° ë°©ì§€  
ì¶”ì²œ ì œí•œ:  
ë™ì¼ IP ë˜ëŠ” ê³„ì •ì—ì„œ 10~20íšŒ/ë¶„ ì´ìƒ ìš”ì²­ ì‹œ ì œí•œ  

(8) ê²€ìƒ‰ API (DDoS ë°©ì§€)  
ì˜ˆ: GET /api/search?q=...  
ì´ìœ :  
ê³¼ë„í•œ ê²€ìƒ‰ ìš”ì²­ìœ¼ë¡œ ì¸í•œ ì„œë²„ ë¶€í•˜ ë°©ì§€  
ì¶”ì²œ ì œí•œ:  
ë™ì¼ IPì—ì„œ 10~20íšŒ/ë¶„ ì´ìƒ ìš”ì²­ ì‹œ ì œí•œ  

#### Rate Limit ì ìš© ë°©ë²•

1. IP ê¸°ë°˜ ì œí•œ
    - ë™ì¼ IPì—ì„œ ì¼ì • íšŸìˆ˜ ì´ìƒ ìš”ì²­ ì‹œ ì°¨ë‹¨ (ì˜ˆ: XíšŒ/ë¶„, YíšŒ/ì‹œê°„)
    - ê³µìš© ë„¤íŠ¸ì›Œí¬(íšŒì‚¬, ì¹´í˜ ë“±)ì—ì„œëŠ” ì˜ˆì™¸ ì²˜ë¦¬ í•„ìš”
2. ì‚¬ìš©ì ê³„ì • ê¸°ë°˜ ì œí•œ
    - ë¡œê·¸ì¸í•œ ì‚¬ìš©ì ê¸°ì¤€ìœ¼ë¡œ ì¼ì • íšŸìˆ˜ ì´ìƒ ìš”ì²­ ì‹œ ì œí•œ
    - ê³„ì • íƒˆì·¨ ì‹œë„ ë°©ì§€ë¥¼ ìœ„í•´ ì ìš©
3. ì§€ìˆ˜ì  ë°±ì˜¤í”„(Exponential Backoff)
    - ì‹¤íŒ¨ íšŸìˆ˜ ì¦ê°€ ì‹œ ëŒ€ê¸° ì‹œê°„ ëŠ˜ë¦¬ê¸° (ì˜ˆ: 5íšŒ ì‹¤íŒ¨ â†’ 5ë¶„ ëŒ€ê¸°, 10íšŒ ì‹¤íŒ¨ â†’ 30ë¶„ ëŒ€ê¸°)
4. Rate Limit í—¤ë” ì œê³µ
    - í´ë¼ì´ì–¸íŠ¸ê°€ ë‚¨ì€ ìš”ì²­ íšŸìˆ˜ë¥¼ ì•Œ ìˆ˜ ìˆë„ë¡ X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Reset í—¤ë” ì¶”ê°€
5. ì„œë²„ ì¸¡ ë¡œê·¸ ê¸°ë¡ ë° ì•Œë¦¼
    - ì´ìƒ íƒì§€ ì‹œ ê´€ë¦¬ìì—ê²Œ ì•Œë¦¼ (ì˜ˆ: íŠ¹ì • ê³„ì •ì—ì„œ ì§§ì€ ì‹œê°„ ë™ì•ˆ ë¡œê·¸ì¸ ì‹œë„ 100íšŒ)

## 3. Usecase

```plantuml
@startuml vdap_usecase
allowmixing
left to right direction
actor Nonmember
actor Member
actor Admin

package NonMemberFunc{
  usecase "Join the\nMembership" as join
  usecase "Email Verification" as email_verification
  email_verification -right-|> join
}

package MemberFunc{
  usecase "Login" as login
  usecase "Find ID" as find_id
  usecase "Find Password" as find_pw
  usecase "Modify\nUserInfo" as modify_user_info
  usecase "Logout" as logout
  usecase "Withdraw\nMembership" as withdraw
}

package AdminFunc{
  usecase "User\nManagement" as user_management
  usecase "UserAdd" as user_add
  usecase "UserDel" as user_del
  usecase "UserPasswordSet" as user_password_set
  user_management <|-down- user_add
  user_management <|-down- user_del
  user_management <|-down- user_password_set 
  usecase "Group\nManagement" as group_management
  usecase "GroupAdd" as group_add
  usecase "GroupDel" as group_del
  usecase "Group\nModify" as group_modify
  group_management <|-- group_add 
  group_management <|-- group_del
  group_management <|-- group_modify
  usecase "Group\nRelation" as group_relation
  usecase "GroupAddToGroup" as group_add_group
  usecase "GroupDelFromFroup" as group_del_group
  usecase "UserAddToGroup" as user_add_group
  usecase "UserDelFromGroup" as user_del_group
  group_relation <|-- group_add_group
  group_relation <|-- group_del_group
  group_relation <|-- user_add_group
  group_relation <|-- user_del_group
}

Nonmember --> join

Member --> login
Member --> find_id
Member --> find_pw
Member --> logout
Member --> modify_user_info
Member --> withdraw

Member <|-- Admin

Admin --> user_management
Admin --> group_management
Admin --> group_relation

@enduml
```

## 4. ì‹œí€€ìŠ¤ & ì¸í„°í˜ì´ìŠ¤

- ë¹„íšŒì›  
  - íšŒì›ê°€ì…  
  - ì´ë©”ì¼ì¸ì¦ìš”ì²­  

```plantuml
@startuml
actor NonMember as non_member
participant Server as server
participant AuthServer as auth_server
participant EmailServer as email

non_member -> server: Join Request 
server -> auth_server : redirect
non_member <-- auth_server : ok

group JoinMember 
    non_member -> auth_server: Request Join Member
    note over auth_server: param check
    opt param error
    non_member <-- auth_server : Error
    end
    auth_server -> email : Send Email
    auth_server <-- email : Success
    non_member <-- auth_server : Success - Request Email Verification
    opt error
    non_member <-- auth_server : Error - Error Message
    end
end

group Email Re-Send
    non_member -> auth_server : Request Re-Send Email
    auth_server -> email : Send Email
    auth_server <-- email : Success
    non_member <- auth_server : Success
    opt error
    non_member <-- auth_server : Error - Error Message
    end
end

group Email Verification
    non_member -> auth_server : Email Verification
    non_member <-- auth_server : Success
    note over auth_server: check
    non_member <-- auth_server : Ok
    opt error
    non_member <-- auth_server : Error(timeover / ...)
    end
end
@enduml
```

- íšŒì›(ê´€ë¦¬ì)
  - ë¡œê·¸ì¸  
  - ì•„ì´ë”” ì°¾ê¸°
  - ë¹„ë°€ë²ˆí˜¸ ì°¾ê¸°  
  - ì‚¬ìš©ì ì •ë³´ ë³€ê²½  
  - ì„¸ì…˜
    - ì„¸ì…˜ ì¡°í¬  
    - ì„¸ì…˜(í† í°) ê°±ì‹ 
    - ì„¸ì…˜ ë¡œê·¸ì•„ì›ƒ
  - ë¡œê·¸ì•„ì›ƒ  
  - íšŒì›íƒˆí‡´  
  
```plantuml
@startuml
actor Member as member
participant Server as server
participant AuthServer as auth_server
member -> server : Login Main
server -> auth_server : Redirect to Auth Server
member <-- auth_server : ok
group Login
    member -> auth_server: Login
    group success
        server <- auth_server: callback(userinfo, token(access, refresh))
        member <- auth_server : LoginSuccess(token)
    end
    group failure
        member <- auth_server : Login Failure
    end
end

group Modify
    member -> auth_server: MyInfo Modify
    group UserInfo
        member -> auth_server: Req Modify UserInfo
        member <-- auth_server: Password
        member -> auth_server: Password
        member <-- auth_server: Success
    end
    group Password
        member -> auth_server: Req Change Password(New, Old)
        member <-- auth_server: Success
    end
end
group Session
    group List
        member -> auth_server: Get Session List
        member <-- auth_server: OK
    end
    group TokenRefresh
        member -> auth_server: Req token
        member <-- auth_server: OK
    end
    group Logout
        member -> auth_server: Logout
        member <-- auth_server: OK
    end
end
group Logout
    member -> auth_server: Logout
    member <-- auth_server: OK
end
group Withdraw
    member -> auth_server: Req Withdraw
    member <-- auth_server: OK and Logout
end
@enduml
```

- ê´€ë¦¬ì
  - ì‚¬ìš©ì  
    - ì¶”ê°€  
    - ìˆ˜ì •  
    - ì‚­ì œ  
  - ê·¸ë£¹
    - ì¶”ê°€  
    - ìˆ˜ì •  
    - ì‚­ì œ  
  - ì‚¬ìš©ì_ê·¸ë£¹  
    - ì¶”ê°€  
    - ìˆ˜ì •  
    - ì‚­ì œ  
  - ê·¸ë£¹_ê·¸ë£¹
    - ì¶”ê°€  
    - ìˆ˜ì •  
    - ì‚­ì œ  

```plantuml
@startuml
actor Admin as admin
participant Server as server
group UserManagement
admin -> server : Add New User
admin <-- server : OK
admin -> server : Modify(Password) User Info
admin <-- server : OK
admin -> server : Del User
admin <-- server : OK
end

group GroupManagement
admin -> server : Add New Group
admin <-- server : OK
admin -> server : Modify Group
admin <-- server : OK
admin -> server : Del Group
admin <-- server : OK
end

group UserGroup
admin -> server : Add User To Group
admin <-- server : OK
admin -> server : Change Group Of User
admin <-- server : OK
admin -> server : Del User From Group
admin <-- server : OK
end

group GroupGroup
admin -> server : Add Group To Group
admin <-- server : OK
admin -> server : Change Group Of Group
admin <-- server : OK
admin -> server : Del Group From Group
admin <-- server : OK
end
@enduml
```

---

íšŒì›ê°€ì… / ë¡œê·¸ì¸ / ë¡œê·¸ì•„ì›ƒì˜ ê²½ìš° ì¸ì¦ì„œë²„ì™€ì˜ ì—°ë™ì— ë”°ë¼ ê°œë°œ í•„ìš”ì„±ì´ ì—†ì„ ìˆ˜ ìˆë‹¤.
ë”°ë¼ì„œ ì´ ë¬¸ì„œì—ì„œ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì •ì˜í•˜ì§€ ì•ŠëŠ”ë‹¤.  

> ì¸ì¦ ì‹œìŠ¤í…œì—ì„œ ë³´ì•ˆê³¼ ê´€ë ¨ëœ ë‚´ìš© í™•ì¸ í•„ìš”  

1. Non Member  
   1. SignUp  
        Reqquest  
        Response  
   2. Email  
        Reqquest  
        Response  
   3. EmailLink...

2. Member
   1. Login
   2. Find ID
   3. Find PW
   4. Modify User Info
   5. Session
      1. List
      2. Refresh
      3. Session Logout
   6. Logout
   7. Withdraw

3. Admin
   1. User Management
   2. Group Management

## 5. í´ë˜ìŠ¤

<img src="image.png" width="300" height="200" alt="í´ë˜ìŠ¤ ê´€ê³„ í™”ì‚´í‘œ">

| ìœ í˜•                    | ê¸°í˜¸    | ëª©ì                                                                    |
| ----------------------- | ------- | ---------------------------------------------------------------------- |
| ì˜ì¡´ì„±(Association)     | `-->`   | ê°ì²´ê°€ ë‹¤ë¥¸ ê°ì²´ë¥¼ ì‚¬ìš©í•¨. ( A `-->` B)                                |
| í™•ì¥(Inheritance)       | `<\|--` | ê³„ì¸µ êµ¬ì¡°ì—ì„œ í´ë˜ìŠ¤ì˜ íŠ¹ìˆ˜í™”. (ë¶€ëª¨ `<\|--` ìì‹)                     |
| êµ¬í˜„(Implementation)    | `<\|..` | í´ë˜ìŠ¤ì— ì˜í•œ ì¸í„°í˜ì´ìŠ¤ì˜ ì‹¤í˜„. (Interface `<\|..` Class)             |
| ì•½í•œ ì˜ì¡´ì„±(Dependency) | `..>`   | ë” ì•½í•œ í˜•íƒœì˜ ì˜ì¡´ì„±. A í´ë˜ìŠ¤ ë©”ì†ŒìŠ¤ íŒŒë¼ë¯¸í„°ë¡œ Bë¥¼ ì‚¬ìš©( A `..>` B) |
| ì§‘í•©(Aggregation)       | `o--`   | ë¶€ë¶„ì´ ì „ì²´ì™€ ë…ë¦½ì ìœ¼ë¡œ ì¡´ì¬í•  ìˆ˜ ìˆìŒ( í´ë˜ìŠ¤ `o--` ë¶€ë¶„ í´ë˜ìŠ¤)     |
| ì»´í¬ì§€ì…˜(Composition)   | `*--`   | ë¶€ë¶„ì´ ì „ì²´ ì—†ì´ ì¡´ì¬í•  ìˆ˜ ì—†ìŒ( í´ë˜ìŠ¤ `*--` ë¶€ë¶„ í´ë˜ìŠ¤)             |

```plantuml
@startuml
' abstract        abstract
' abstract class  "abstract class"
' annotation      annotation
' circle          circle
' ()              circle_short_form
' class           class
' class           class_stereo  <<stereotype>>
' diamond         diamond
' <>              diamond_short_form
' entity          entity
' enum            enum
' exception       exception
' interface       interface
' metaclass       metaclass
' protocol        protocol
' stereotype      stereotype
' struct          struct

class           User
class           Group
class           Relation
@enduml
```

## 6. ë°ì´í„°ë² ì´ìŠ¤

**User**  

| Column       | Data Type                             | Constraints               | Index | Desc                  |
| ------------ | ------------------------------------- | ------------------------- | :---: | --------------------- |
| `id`         | UUID                                  | PRIMARY KEY               |   v   | ì‚¬ìš©ì í…Œì´ë¸” PK Key  |
| `email`      | VARCHAR(255)                          | UNIQUE, NOT NULL          |   v   | ì‚¬ìš©ì ì•„ì´ë””(ì´ë©”ì¼) |
| `password`   | VARCHAR(255)                          | NOT NULL                  |       | ì‚¬ìš©ì ì•”í˜¸           |
| `name`       | VARCHAR(255)                          | NOT NULL                  |       | ì‚¬ìš©ì ì´ë¦„           |
| `nickname`   | VARCHAR(255)                          | NOT NULL                  |       | ì‚¬ìš©ì ë³„ì¹­           |
| `phone`      | VARCHAR(255)                          |                           |       | ì‚¬ìš©ì ì—°ë½ì²˜         |
| `status`     | ENUM('Active', 'Inactive', 'Dormant') | DEFAULT 'Inactive'        |       | ì‚¬ìš©ì ê³„ì • ìƒíƒœ      |
| `created_at` | TIMESTAMP                             | NOT NULL                  |       | ì‚¬ìš©ì ê³„ì • ìƒì„±ì¼    |
| `updated_at` | TIMESTAMP                             | DEFAULT CURRENT_TIMESTAMP |       | ì‚¬ìš©ì ê³„ì • ìˆ˜ì •ì¼    |

---

**Group (ê·¸ë£¹)**  

| Column        | Data Type    | Constraints               | Index | Desc        |
| ------------- | ------------ | ------------------------- | :---: | ----------- |
| `id`          | UUID         | PRIMARY KEY               |   v   | ê·¸ë£¹ ì•„ì´ë”” |
| `name`        | VARCHAR(255) | UNIQUE, NOT NULL          |   v   | ê·¸ë£¹ ì´ë¦„   |
| `nickname`    | VARCHAR(255) |                           |       |             |
| `description` | TEXT         |                           |       |             |
| `created_at`  | TIMESTAMP    | NOT NULL                  |       |             |
| `updated_at`  | TIMESTAMP    | DEFAULT CURRENT_TIMESTAMP |       |             |

---

**GroupUserRelation( ê·¸ë£¹ - ê·¸ë£¹ or ê·¸ë£¹ - ì‚¬ìš©ì ê´€ê³„ ì •ë³´ í…Œì´ë¸”)**  

| Column       | Data Type             | Constraints                                     | Index |
| ------------ | --------------------- | ----------------------------------------------- | :---: |
| `parents_id` | UUID                  | FOREIGN KEY â†’ `Group(id)`, NOT NULL             |   v   |
| `child_type` | ENUM('Group', 'User') | NOT NULL                                        |   v   |
| `child_id`   | UUID                  | FOREIGN KEY â†’ `Group(id) or User(id)`, NOT NULL |   v   |
| `joined_at`  | TIMESTAMP             | DEFAULT CURRENT_TIMESTAMP                       |       |

---

**Session**  

| Column            | Data Type   | Constraints                                   | Index | Desc                                 |
| ----------------- | ----------- | --------------------------------------------- | :---: | ------------------------------------ |
| `session_id`      | CHAR(64)    | PRIMARY KEY                                   |   v   | ì„¸ì…˜ ê³ ìœ  ì‹ë³„ì(sha256 í•´ì‹œ)        |
| `user_id`         | UUID        | FOREIGN KEY â†’ `User(id)`, NOT NULL            |   v   | ì‚¬ìš©ì í…Œì´ë¸”ì˜ ì•„ì´ë””               |
| `access_token`    | TEXT        | NOT NULL                                      |       | ì„¸ì…˜ ì•¡ì„¸ìŠ¤ í† í°(JWT ë˜ëŠ” ëœë¤ í† í°) |
| `refresh_token`   | TEXT        | NOT NULL                                      |       | ë¦¬í”„ë ˆì‹œ í† í°                        |
| `ip_address`      | VARCHAR(45) | NOT NULL                                      |       | ì‚¬ìš©ì ë¡œê·¸ì¸ IP                     |
| `user_agent`      | TEXT        | NOT NULL                                      |       | ì‚¬ìš©ìì˜ ë¸Œë¼ìš°ì €/ê¸°ê¸° ì •ë³´          |
| `created_at`      | DATETIME    | NOT NULL, DEFAULT CURRENT_TIMESTAMP           |       | ì„¸ì…˜ ìƒì„± ì‹œê°„                       |
| `expires_at`      | DAATTIME    | NOT NULL                                      |       | ì„¸ì…˜ ë§Œë£Œ ì‹œê°„                       |
| `last_activity`   | DATETIME    | NOT NULL, DEFAULT CURRENT_TIMESTAMP ON UPDATE |       | ë§ˆì§€ë§‰ ìš”ì²­ ì‹œê°„                     |
| `is_active`       | BOOLEAN     | NOT NULL, DEFAULT TRUE                        |       | ì„¸ì…˜ í™œì„± ì—¬ë¶€(ë¡œê·¸ì•„ì›ƒ FALSE)       |
| `failed_attempts` | INT         | NOT NULL, DEFAULT 0                           |       | ë¡œê·¸ì¸ ì‹¤íŒ¨ íšŸìˆ˜                     |

---


## 4. Role (ì—­í• )

| Column       | Data Type   | Constraints                  | Index |
|-------------|------------|------------------------------|-------|
| `id`        | UUID       | PRIMARY KEY                  | âœ…    |
| `name`      | VARCHAR(255) | UNIQUE, NOT NULL            | âœ…    |
| `description` | TEXT      |                              |       |

---

## 5. User_Role (ì‚¬ìš©ì - ì—­í•  ê´€ê³„)

| Column    | Data Type | Constraints                       | Index |
|-----------|----------|-----------------------------------|-------|
| `user_id` | UUID     | FOREIGN KEY â†’ `User(id)`, NOT NULL | âœ…    |
| `role_id` | UUID     | FOREIGN KEY â†’ `Role(id)`, NOT NULL | âœ…    |

---

## 6. Group_Role (ê·¸ë£¹ - ì—­í•  ê´€ê³„)

| Column    | Data Type | Constraints                       | Index |
|-----------|----------|-----------------------------------|-------|
| `group_id` | UUID    | FOREIGN KEY â†’ `Group(id)`, NOT NULL | âœ…    |
| `role_id`  | UUID    | FOREIGN KEY â†’ `Role(id)`, NOT NULL | âœ…    |

---

## 7. Permissions (ê¶Œí•œ)

| Column      | Data Type   | Constraints                          | Index |
|------------|------------|--------------------------------------|-------|
| `id`       | UUID       | PRIMARY KEY                          | âœ…    |
| `name`     | VARCHAR(255) | UNIQUE, NOT NULL                    | âœ…    |
| `resource` | VARCHAR(255) | NOT NULL                            | âœ…    |
| `action`   | ENUM('READ', 'WRITE', 'UPDATE', 'DELETE') | NOT NULL |       |

---

## 8. Role_Permission (ì—­í•  - ê¶Œí•œ ê´€ê³„)

| Column       | Data Type | Constraints                          | Index |
|-------------|----------|--------------------------------------|-------|
| `role_id`   | UUID     | FOREIGN KEY â†’ `Role(id)`, NOT NULL  | âœ…    |
| `permission_id` | UUID  | FOREIGN KEY â†’ `Permissions(id)`, NOT NULL | âœ…    |

---

## 9. Attributes (ì†ì„±)

| Column       | Data Type   | Constraints                          | Index |
|-------------|------------|--------------------------------------|-------|
| `id`        | UUID       | PRIMARY KEY                          | âœ…    |
| `name`      | VARCHAR(255) | NOT NULL                            | âœ…    |
| `value`     | TEXT       | NOT NULL                            |       |
| `entity_type` | ENUM('User', 'Group', 'Role', 'Resource') | NOT NULL |       |
| `entity_id`  | UUID      | NOT NULL                             | âœ…    |

---

## 10. Permission_Attributes (ê¶Œí•œ - ì†ì„± ê´€ê³„)

| Column         | Data Type | Constraints                           | Index |
|--------------|----------|---------------------------------------|-------|
| `permission_id` | UUID  | FOREIGN KEY â†’ `Permissions(id)`, NOT NULL | âœ…    |
| `attribute_id`  | UUID  | FOREIGN KEY â†’ `Attributes(id)`, NOT NULL | âœ…    |

---

## 11. Session (ì‚¬ìš©ì ì„¸ì…˜)

| Column       | Data Type   | Constraints                          | Index |
|-------------|------------|--------------------------------------|-------|
| `id`        | UUID       | PRIMARY KEY                          | âœ…    |
| `user_id`   | UUID       | FOREIGN KEY â†’ `User(id)`, NOT NULL  | âœ…    |
| `device_info` | TEXT     | NOT NULL                            |       |
| `ip_address` | VARCHAR(255) | NOT NULL                            | âœ…    |
| `created_at` | TIMESTAMP | DEFAULT CURRENT_TIMESTAMP            |       |
| `expires_at` | TIMESTAMP | NOT NULL                             | âœ…    |

---

## 12. Audit_Log (ê°ì‚¬ ë¡œê·¸)

| Column        | Data Type   | Constraints                              | Index |
|--------------|------------|------------------------------------------|-------|
| `id`         | UUID       | PRIMARY KEY                              | âœ…    |
| `user_id`    | UUID       | FOREIGN KEY â†’ `User(id)`, NULL ê°€ëŠ¥      | âœ…    |
| `session_id` | UUID       | FOREIGN KEY â†’ `Session(id)`, NULL ê°€ëŠ¥   | âœ…    |
| `role_id`    | UUID       | FOREIGN KEY â†’ `Role(id)`, NULL ê°€ëŠ¥      |       |
| `resource`   | VARCHAR(255) | NOT NULL                                | âœ…    |
| `action`     | ENUM('READ', 'WRITE', 'UPDATE', 'DELETE') | NOT NULL |       |
| `status`     | ENUM('SUCCESS', 'ACCESS_DENIED', 'INVALID_SESSION') | NOT NULL | |
| `reason`     | TEXT       | NULL ê°€ëŠ¥                                |       |
| `timestamp`  | TIMESTAMP  | DEFAULT CURRENT_TIMESTAMP                | âœ…    |

---

# ğŸ”¹ ì¶”ê°€ì ì¸ ë°ì´í„°ë² ì´ìŠ¤ ìµœì í™”
1. **Index ì ìš©**
   - ìì£¼ ê²€ìƒ‰ë˜ëŠ” `user_id`, `session_id`, `role_id`, `resource` ë“±ì— ì¸ë±ìŠ¤ ì ìš©
   - `Audit_Log`ì˜ `timestamp`ì— ì¸ë±ìŠ¤ ì¶”ê°€í•˜ì—¬ ë¡œê·¸ ì¡°íšŒ ì„±ëŠ¥ í–¥ìƒ

2. **ë°ì´í„° ë³´ì¡´ ì •ì±…**
   - `Audit_Log` í…Œì´ë¸”ì€ ì¼ì • ê¸°ê°„(ì˜ˆ: 6ê°œì›”) í›„ `archive_audit_log` í…Œì´ë¸”ë¡œ ì´ì „

3. **Partitioning (íŒŒí‹°ì…”ë‹)**
   - `Audit_Log`ì„ ì›”ë³„ íŒŒí‹°ì…”ë‹í•˜ì—¬ ëŒ€ìš©ëŸ‰ ë°ì´í„° ìµœì í™” (`audit_log_2024_02` ë“±)

4. **Foreign Key ì œì•½ ì ìš©**
   - ë°ì´í„° ë¬´ê²°ì„±ì„ ìœ ì§€í•˜ê¸° ìœ„í•´ ì™¸ë˜ í‚¤ ì„¤ì • (`ON DELETE CASCADE` ì˜µì…˜ ê³ ë ¤ ê°€ëŠ¥)
   - 

# 2. ì €ì¥ì†Œ ê°€ìƒí™” 

## 12. Audit_Log (ê°ì‚¬ ë¡œê·¸)

| Column        | Data Type   | Constraints                              | Index |
|--------------|------------|------------------------------------------|-------|
| `id`         | UUID       | PRIMARY KEY                              | âœ…    |
| `user_id`    | UUID       | FOREIGN KEY â†’ `User(id)`, NULL ê°€ëŠ¥      | âœ…    |
| `session_id` | UUID       | FOREIGN KEY â†’ `Session(id)`, NULL ê°€ëŠ¥   | âœ…    |
| `role_id`    | UUID       | FOREIGN KEY â†’ `Role(id)`, NULL ê°€ëŠ¥      |       |
| `resource`   | VARCHAR(255) | NOT NULL                                | âœ…    |
| `action`     | ENUM('READ', 'WRITE', 'UPDATE', 'DELETE') | NOT NULL |       |
| `status`     | ENUM('SUCCESS', 'ACCESS_DENIED', 'INVALID_SESSION') | NOT NULL | |
| `reason`     | TEXT       | NULL ê°€ëŠ¥                                |       |
| `timestamp`  | TIMESTAMP  | DEFAULT CURRENT_TIMESTAMP                | âœ…    |